(function(r,o){typeof exports=="object"&&typeof module<"u"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(r=typeof globalThis<"u"?globalThis:r||self,o(r["v-clipboard"]={}))})(this,function(r){"use strict";var w=Object.defineProperty;var x=(r,o,d)=>o in r?w(r,o,{enumerable:!0,configurable:!0,writable:!0,value:d}):r[o]=d;var p=(r,o,d)=>(x(r,typeof o!="symbol"?o+"":o,d),d);class o{constructor(){p(this,"seed",0);p(this,"data",new Map)}id(){return Date.now().toString(26)+this.seed++}add(e,n=this.id()){return this.data.set(n,e),n}get(e){return this.data.get(e)}delete(e){this.delete(e)}}const d="Failed to copy value to clipboard. Unknown type.",g={asString(t){if(t==null)return console.warn("Clipboard input is empty"),"";if(typeof t!="string")try{return JSON.stringify(t)}catch(e){return console.warn(d,e),""}return t}},m="position:fixed; pointer-events:none; z-index:-9999; opacity:0;",y={createTextarea(t){const e=document.createElement("textarea");return e.addEventListener("focusin",n=>{n.stopPropagation()}),e.value=t,e.setAttribute("readonly",""),e.style.cssText=m,e}},l={async requestClipboardPermission(){return navigator.permissions.query({name:"clipboard-write"})},async writeClipboard(t){return(await l.requestClipboardPermission()).state==="granted"?(await navigator.clipboard.writeText(t),!0):!1},writeClipboardExecCommand(t){const e=y.createTextarea(t);if(document.body.appendChild(e),navigator.userAgent.match(/ipad|ipod|iphone/i)){e.contentEditable="true",e.readOnly=!0;const a=document.createRange();a.selectNodeContents(e);const i=window.getSelection();i&&(i.removeAllRanges(),i.addRange(a),e.setSelectionRange(0,999999))}else e.select();const n=document.execCommand("copy");return document.body.removeChild(e),n},async copy(t){const e=typeof t=="function"?t():t,n=g.asString(e);if(l.writeClipboardExecCommand(n))return!0;await l.writeClipboard(n)}},c=new o,C={install(t){const e=t.version[0]==="3"?t.config.globalProperties:t.prototype;e.$clipboard=l.copy,t.directive("clipboard",{beforeMount(n,a){const i=a.arg,s=a.value,u=typeof s=="function";if(i==="error"&&u){n.dataset.clipboardError=c.add(s);return}if(i==="error"&&u){n.dataset.clipboardSuccess=c.add(s);return}const f=async h=>{var b;const v=await l.copy(s)?n.dataset.clipboardSuccess:n.dataset.clipboardError;(b=c.get(v))==null||b({value:s,event:h})};n.dataset.clipboardClick=c.add(f),n.addEventListener("click",f)},unmounted(n){const{clipboardSuccessHandler:a,clipboardErrorHandler:i,clipboardClickHandler:s}=n.dataset;if(a&&c.delete(a),i&&c.delete(i),s){const u=c.get(s);u&&(n.removeEventListener("click",u),c.delete(s))}},get bind(){return this.beforeMount},get unbind(){return this.unmounted}})}};r.Clipboard=l,r.default=C,Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=v-clipboard.umd.js.map
